# C 本体

> 所谓本体就是语言原生支持的操作，无需借助任何外部程序，包括标准库的程序

## 引言

* 本体不支持
  * 复合数据结构直接处理
    * C语言不提供直接处理诸如字符串、集合、列表或数据等复合对象的操作。虽然可以将整个结构作为一个单元进行拷贝，但C语言没有处理整个数组或字符串的操作。
  * 存储管理
    * 除了由函数的局部变量提供的静态定义和堆栈外，C语言没有定义任何存储器分配工具，也不提供堆和无用内存回收工具。
  * 输入输出
    * C语言本身没有提供IO功能，没有READ或WRITE语句，也没有内置的文件访问方法。所有这些高层的机制必须由显式调用的函数提供。
  * 并行
    * C语言只提供简单的单线程控制流，即测试、循环、分组和子程序，它不提供多道程序设计、并行操作、同步和协同例程。
* 语言学家？
  * 有关编程语言的官方标准，即最全最准最细的语言介绍，是给编译器实现者看的，不是给普通程序员看的，所以我们没必要了解所有细节，大概知道整个知识树，用什么细节钻研什么细节就行了。
  * 所以笔记没必要奢求一次性把所有相关只是内容记下来，只需第一遍填充整体的框架，然后以后一遍一遍根据实际应用填充细节即可。

# 1 变量

> 变量或者说数据结构就是语言提供给我们的**可以读写的一块内存的抽象**，仅此而已。

## 1.1 概念

### 1.1.1 内存抽象

* 字节数组
  * 对于程序而言，内存就是一个巨大的字节数组，下标是从0x0000000000000000(64位机器)开始的地址，值是8bit的位pattern。
* 键值对
  * 内存就是一个数组，换言之就是键值对，键是下标，值是值。
  * **所以底层对于内存的访问永远是靠键，即地址。**
  * 语言提供的抽象也是键值对，并且通过键来使用值
    * 只不过语言提供的所谓<变量名-值>、<引用-值>、<指针-值>等键值对
    * 其键的底层本质都是地址访问，只不过编译器隐藏了这一点然后给我们提供抽象罢了。

### 1.1.2 所谓变量类型

* 所有类型变量的值都是位模式
* 变量的类型只是决定编译器如何解释位模式

### 1.1.3 变量、常量、字面值

##### 1. 变量

* 很好理解，值可以变得就是变量

##### 2. 常量

* 定义
  * 硬件上一块内存总是可以读写的，所以其抽象叫做变量
  * 出于软件需要，有时要限制变量的修改，那么这个被限制修改的“变量”就是常量
* 分类
  * 字面值
    * 有些“变量”，比如字面值，它一定存储在某块内存，但是这块内存是匿名的，语言并没有提供相应的键供我们读写这块内存。
    * 所以字面值就是系统限制的常量
  * 常量
    * 程序员人为限制的不能写的变量就是常量

##### 3.字面值

*  定义

  * 一种特殊的“变量”，它的键十分特殊，特殊在两点
  
    *  它的键就是它的值的，所以叫字面值。
    *  我们只能读存储字面值的这块内存，而无法修改，因为它是匿名的。
  
  * 不加引号的表示数字字面值、单引号表示字符字面值、双引号表示字符串字面值。
  
    * ```c
      int c=10	
      char ch='a'
      char * str="nmsl"
      //这里10、'a'、"nmsl"分别是数值字面值，字符字面值，字符串字面值
      ```
  
* 使用

  *  字面值见名知义，十分方便
  *  但是凡是有一定意义的字面值，最好不要随处卵用，例如要用"hello world"作为问候语
  *  那么相比随处乱用，最好定义一个符号常量使用它
    *  #define   HELLO   "hello world"
    *  预处理器会把所有出现HELLO的地方替换为"hello world",相当于全局搜索替换文本。


### 1.1.4 声明、定义、初始化

> declaration , define，initialization

* 声明
  * 不给变量分配内存，仅仅声明变量名字和性质。
  * 可以理解为声明了键，但是没有对应的值
* 定义
  * 声明变量、分配内存、构造变量并初始化
  * 可以理解为生成了一个键值对
* 初始化
  * 定义变量的时候会执行变量初始化
  * 初始化类型
    * 默认初始化
      * 对于普通简单变量而言就是随机值
      * 对于结构，类等复杂变量而言就是构造函数设定的默认值。
    * 赋值初始化
      * 字面值赋值
      * 变量赋值

### 1.1.5 全局变量和局部变量

#### 1. 局部变量

* 函数内定义的变量
* 因为只在函数执行时创建，执行完毕后销毁，所以也叫自动变量

#### 2. 全局变量

* 定义在所有函数之外，且只能定义一次，由编译程序分配存储单元。
* 定义在所有函数之外，所以也叫外部变量

### 1.1.5 生存期和作用域

#### 1. 生存期

> 生存期指变量所在内存块没被释放的这段时间

* 全局变量
  * 编译时创建-程序结束时释放
* 局部变量
  * 函数执行时创建-函数执行完毕释放

#### 2. 作用域

> 就是变量名这个键的作用范围

* 全局变量

  * 全局作用域，所有源文件都可使用

    * 定义全局变量的文件可以直接使用

    * 其他文件需要先声明后使用。

      * ```c
        //file1.c
        int test;
        int main()
        {}
        //file2.c
        extern int test;
        int main()
        {test=10;}
        ```

* 局部变量

  * 块作用域，块儿内使用

## 1.2 分类

### 1.2.1 数值变量

### 1.2.2 字符变量

#### 1 定义

> declare , define

* 定义

  * ```c
  //构建没有初始化，值为随机值
  char var1
  //构建并以字面值初始化，转义字符斜杠用来表示无法输入的或无法显示的字符字面值
  char var1='a',var2='\n',var3='\"', var4='\0',var5='\20'
  //构建并以字符变量初始化。
  char var1='a'
  char var2=var1

#### 2 使用

> 变量需先声明后使用

* 左值(写)

  * ```c 
    char var1='c',var2='\0'
    //作为左值，可以被赋值，即修改
    var1=var2    //字符变量赋值
    var1='\n'    //字符字面值赋值
    ```

* 右值(读)

  * ```c
    char var1='c',var2='d'
     var1=var2
    ```

#### 3 常用字符

* 空白符(whitespace)
  * '\\20', '\\t', '\\n'     空格、制表、换行
    * SPACE, TAG, ENTER
    * 可以键盘直接输入，但是都显示为空白
* 空字符
  * '\\0'
    * 不可显示字符，无法键盘直接输入
* 字母
  * '\\65'-'\\90'
  * A-Z
    * 可键盘直接输入，显示为A-Z
  * '\\97'-'\\122'
  * a-z
    * 可键盘直接输入，显示为a-z

### 1.1.3 数组变量

#### 0. 数组 

#### 1. 数值数组

#### 2. 字符数组



# 2 函数

> function

### 1.2.1 声明和定义

### 1.2.2 参数

* 值传递
  * C语言只有一种传参方式就是值传递。
  * **本质就是被调函数利用其调用者的实际参数赋值初始化自己的形式参数。**

### 1.2.3 返回值

* 每个函数都有返回值，除了main函数之外的所有函数返回值返回给其调用者函数。
* main函数的返回值返回给其执行环境。
  * 类似shell中执行ls，ls返回值返回给其执行环境shell

# 3 表达式

### 1.3.1 定义

* 表达式与语句

  * **任何一个去掉分号的语句就是一个表达式**
  * 换言之，任何一个表达式(expression)加上分号就是一个语句(statement).

* 表达式形式

  * 操作符+操作数

  * 操作数

  * 空

  * ```c
    int a,b;
    a+b;   //操作符+操作数型
    a;	   //操作数型
    ;      //空型
    ```

* 表达式的值

  * 不管使用表达式与否，只要表达式出现在程序执行流程中，
  * 程序都会对表达式求一个值，所以每个表达式都有一个值，空表达式值为空。

# 4 流程控制

> flow control

### 1.4.1 条件(condition)

* 条件部分可以是任意表达式
* 判断流程
  * 执行表达式
  * 得到表达式的值
  * 根据表达式值进行条件判断

# 5. 语句与块

### 1.语句

* 每个分号标识一个语句

### 2. 块

* 一对花括号标识一个块

# 6 预处理机制

