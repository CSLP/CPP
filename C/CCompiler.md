# C整个编译过程

# 1. 预处理

> 真正的编译之前的一个步骤，也可以看做编译过程的第一个步骤

## 1.1 预处理语句

> 程序中#开头的语句
>
> 切记预处理语句不用分号结尾

### 1.1.1 文件包含#include

* 定义
  * 把后面文件内的所有内容抄到#include所在位置，仅此而已。
* 分类
  * #include "文件名"
    * 在源文件所在位置查找文件
    * 如果该位置没找到，根据编译器相依规则查找。
    * 一般自定义头文件用引号
  * #include <文件名>
    * 根据编译器规则查找文件所在位置。
    * 一般系统头文件用尖括号，编译器会去它下载标准库头文件的位置去找。

### 1.1.2 宏替换#define

* 定义
  * 定义的名字的作用域从其定义点开始，到源文件尾。
  * 把名字出现的地方都替换为名字后面的文本，仅此而已。
* 分类
  * #define  名字  替换文本
    * 名字同变量名
    * 简单名字部分全部替换
  * #define  带括号名字    替换文本
    * 名字中带括号
    * 替换也有参数，有点小复杂，没卵用，遇到再说吧，掌握第一种就行了

### 1.1.3 条件包含#if

* 定义

  * 类似if语句，条件为真，那么编译内容
  * 为假，直接跳过，相当于当做注释，不当做代码，直接跳过编译。

* 形式

  * ```c
    #if  常量表达式(不能是枚举常量，不能有类型转换符，sizeof语句)
    #elif
    #else
    #endif
    //跟if逻辑一样，为真，编译，假直接跳过
    #ifdef 名字
    #define 名字
    #endif
    //如果名字定义过了(就是执行了#define名字语句)，那么#ifdef后面的所有内容跳过编译
    //如果名字没定义过，编译执行接下来的所有内容。
    
    //常用于头文件，防止不同源文件包含同一个头文件，如果头文件中有函数定义，会导致函数重定义，
    //把头文件用这个包起来，那么这个头文件只会被编译一次，其他的都被跳过了。
    ```

    * 后者常用于头文件，防止不同源文件包含同一个头文件，如果头文件中有函数定义，会导致函数重定义，把头文件用这个包起来，那么这个头文件只会被编译一次，其他的都被跳过了。

# 2. 编译

### 2.1 记号

* C语言中共有6类记号

  * 标识符
  * 关键字
  * 常量
  * 字符串字面值
  * 运算符
  * 其他分隔符

* 空白符和注释

  > 空白符和注释在程序中仅用来分隔记号，因此将被忽略

  * 空格，横纵向制表符，回车符，换行符，换页符(统称为空白符)
  * 注释
    * 单行//
    * 多行 /*